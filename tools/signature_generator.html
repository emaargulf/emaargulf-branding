<!-- 
    Project: Emaar Gulf Signature Generator
    Version: 6.1 (Pure CSS / Pixel-Perfect Tailwind Match / Mobile Supported)
    Developer: Mohammed Safdar (archengsafdar@gmail.com)
    Path: /tools/signature_generator.html
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="archengsafdar@gmail.com">
    <title>Signature Generator | Emaar Gulf</title>
    
    <!-- Google Fonts ONLY -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Variables (Exact Tailwind Color Palette) */
        :root {
            --primary: #f1aa27; --primary-hover: #eab308; /* yellow-500 */
            --dark: #333333;
            --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb;
            --gray-300: #d1d5db; --gray-400: #9ca3af; --gray-500: #6b7280;
            --gray-600: #4b5563; --gray-700: #374151; --gray-800: #1f2937;
            --gray-900: #111827;
            --red-100: #fee2e2; --red-400: #f87171; --red-500: #ef4444; --red-600: #dc2626;
            --green-500: #22c55e;
        }

        /* 1. Base Reset (Tailwind Preflight Emulation) */
        *, ::before, ::after { box-sizing: border-box; border-width: 0; border-style: solid; border-color: var(--gray-200); }
        html { line-height: 1.5; -webkit-text-size-adjust: 100%; font-family: 'Inter', sans-serif; }
        body { margin: 0; background-color: var(--gray-50); color: var(--gray-800); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        input, select, textarea, button { font-family: inherit; font-size: 100%; font-weight: inherit; line-height: inherit; color: inherit; margin: 0; padding: 0; }
        button, select { text-transform: none; }
        button, [type='button'] { appearance: button; background-color: transparent; background-image: none; }
        p, h1, h2, h3, h4 { margin: 0; }

        /* 2. Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--gray-100); }
        ::-webkit-scrollbar-thumb { background: var(--gray-300); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--gray-400); }

        /* 3. Utility Classes */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        .hidden { display: none !important; }
        .invalid-input { border-color: var(--red-500) !important; background-color: var(--red-100) !important; color: var(--red-600); }

        /* 4. Login Screen */
        .login-overlay { position: fixed; inset: 0; background-color: var(--dark); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 50; padding: 1rem; transition: opacity 0.5s; }
        .login-card { background-color: #fff; padding: 2rem; border-radius: 0.75rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); width: 100%; max-width: 28rem; text-align: center; border-top: 4px solid var(--primary); }
        .login-logo { height: 4rem; margin-left: auto; margin-right: auto; margin-bottom: 1.5rem; object-fit: contain; display: block; }
        .login-h1 { font-family: 'Cairo', sans-serif; font-size: 1.875rem; font-weight: 700; color: var(--dark); margin-bottom: 1.5rem; letter-spacing: -0.05em; }
        .login-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }
        .login-subtitle { font-size: 0.75rem; color: var(--gray-500); margin-bottom: 1.5rem; }
        .login-input { width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 0.25rem; margin-bottom: 1rem; text-align: center; outline: 2px solid transparent; outline-offset: 2px; transition: all 150ms; background-color: #fff; }
        .login-input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary); }
        .btn-login { width: 100%; background-color: var(--primary); color: var(--gray-900); font-weight: 700; padding: 0.75rem; border-radius: 0.25rem; cursor: pointer; transition: all 150ms; }
        .btn-login:hover { background-color: var(--primary-hover); }
        .btn-login:active { transform: scale(0.95); }
        .login-error { color: var(--red-500); font-size: 0.75rem; font-weight: 700; margin-top: 0.75rem; }
        .login-footer { font-size: 0.75rem; color: var(--gray-500); margin-top: 2rem; }
        .login-dev { font-size: 0.625rem; color: var(--gray-600); opacity: 0.5; font-family: monospace; transition: opacity 150ms; text-decoration: none; display: block; margin-top: 0.5rem; }
        .login-dev:hover { opacity: 1; }

        /* 5. App Layout & Header */
        .app-container { display: flex; flex-direction: column; height: 100%; }
        .app-header { background-color: var(--dark); color: #fff; padding: 1rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); z-index: 10; border-bottom: 1px solid var(--gray-700); }
        .header-logo-group { display: flex; align-items: center; gap: 0.75rem; }
        .header-logo { height: 2rem; display: block; }
        .header-title { font-weight: 700; font-size: 1.125rem; display: flex; align-items: center; }
        .header-version { font-size: 0.75rem; color: var(--gray-400); font-family: monospace; font-weight: 400; margin-left: 0.5rem; }
        .header-status { font-size: 0.75rem; color: var(--gray-400); font-family: monospace; display: flex; align-items: center; gap: 0.5rem; }
        .status-saved { color: var(--primary); font-weight: 700; opacity: 0; transition: opacity 0.5s; }
        
        @media (max-width: 640px) {
            .header-logo { height: 1.5rem; }
            .header-title { font-size: 0.875rem; }
            .header-version { font-size: 0.625rem; margin-left: 0.25rem; }
            .status-divider, .status-text { display: none; }
        }

        /* 6. Workspace & Sidebar Grid */
        .workspace { display: flex; flex-direction: column; flex: 1; overflow: hidden; }
        @media (min-width: 1024px) { .workspace { flex-direction: row; } }

        .sidebar { width: 100%; height: 50%; background-color: #fff; border-bottom: 1px solid var(--gray-200); overflow-y: auto; display: flex; flex-direction: column; z-index: 10; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        @media (min-width: 1024px) { .sidebar { width: 33.333333%; height: 100%; border-bottom: none; border-right: 1px solid var(--gray-200); z-index: 0; } }
        
        .sidebar-content { padding: 1.5rem; display: flex; flex-direction: column; gap: 1.5rem; flex-grow: 1; }

        /* 7. Form Typography & Inputs (Tailwind Exact Match) */
        .section-title { font-size: 0.875rem; line-height: 1.25rem; font-weight: 700; color: var(--gray-900); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 1rem; border-bottom: 1px solid var(--gray-200); padding-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem; }
        .section-title svg { width: 1rem; height: 1rem; color: var(--primary); }
        
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; font-size: 0.75rem; line-height: 1rem; font-weight: 500; color: var(--gray-500); margin-bottom: 0.25rem; }
        .font-arabic { font-family: 'Cairo', sans-serif; text-align: right; }
        
        /* The Exact Tailwind Input Rendering */
        .form-input, .form-textarea { width: 100%; padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 0.25rem; font-size: 1rem; line-height: 1.5rem; outline: 2px solid transparent; outline-offset: 2px; transition: all 150ms; background-color: #fff; }
        .form-input::placeholder, .form-textarea::placeholder { color: var(--gray-300); opacity: 1; }
        .form-input:focus, .form-textarea:focus { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary); }
        
        .uppercase { text-transform: uppercase; }
        .lowercase { text-transform: lowercase; }
        .form-help { font-size: 0.625rem; line-height: 1rem; color: var(--gray-400); margin-top: 0.25rem; }
        .error-text { font-size: 0.625rem; line-height: 1rem; color: var(--red-500); margin-top: 0.25rem; }
        
        .input-group { display: flex; gap: 0.5rem; }
        .w-1-3 { width: 33.333333%; }
        .w-2-3 { width: 66.666667%; }

        /* The Restored Custom Dropdown Arrow */
        .select-wrapper { position: relative; width: 100%; }
        .form-select { width: 100%; padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 0.25rem; font-size: 1rem; line-height: 1.5rem; outline: 2px solid transparent; outline-offset: 2px; transition: all 150ms; background-color: #fff; appearance: none; cursor: pointer; }
        .form-select:focus { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary); }
        .form-select-sm { font-size: 0.875rem; line-height: 1.25rem; } /* For Phone prefix */
        .select-icon { pointer-events: none; position: absolute; inset-block-start: 0; inset-block-end: 0; right: 0; display: flex; align-items: center; padding-left: 0.5rem; padding-right: 0.5rem; color: var(--gray-700); }
        .select-icon svg { fill: currentColor; height: 1rem; width: 1rem; }

        /* 8. Admin Controls */
        .admin-toggle { font-size: 0.75rem; color: var(--gray-400); cursor: pointer; display: flex; align-items: center; gap: 0.25rem; transition: color 150ms; padding-top: 1rem; border-top: 1px solid var(--gray-100); width: 100%; }
        .admin-toggle:hover { color: var(--gray-600); }
        .admin-toggle:hover svg { color: var(--red-500); }
        .admin-toggle svg { width: 0.75rem; height: 0.75rem; }
        .admin-panel { background-color: var(--gray-50); padding: 1rem; border-radius: 0.5rem; border: 1px solid var(--gray-200); margin-top: 1rem; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--red-100); padding-bottom: 0.5rem; margin-bottom: 0.75rem; }
        .admin-title { font-size: 0.75rem; font-weight: 700; color: var(--red-600); text-transform: uppercase; }
        .btn-reset { font-size: 0.625rem; color: var(--red-400); cursor: pointer; text-decoration: underline; }
        .btn-reset:hover { color: var(--red-600); }
        .admin-label { font-size: 0.625rem; font-weight: 700; color: var(--gray-400); text-transform: uppercase; display: block; margin-bottom: 0.5rem; }
        .admin-input { width: 100%; font-size: 0.75rem; line-height: 1rem; padding: 0.375rem; border: 1px solid var(--gray-300); border-radius: 0.25rem; margin-bottom: 0.5rem; outline: 2px solid transparent; outline-offset: 2px; }
        .admin-input[readonly] { background-color: var(--gray-100); color: var(--gray-500); }
        .admin-input:focus:not([readonly]) { border-color: var(--primary); box-shadow: 0 0 0 2px var(--primary); }

        .sidebar-footer { background-color: var(--gray-100); border-top: 1px solid var(--gray-200); padding: 1rem; text-align: center; }
        .sidebar-footer p { font-size: 0.625rem; color: var(--gray-400); margin: 0; }
        .sidebar-footer a { color: var(--gray-500); font-weight: 700; text-decoration: none; transition: color 150ms; }
        .sidebar-footer a:hover { color: var(--primary); }

        /* 9. Preview Canvas Area */
        .preview-container { flex: 1; display: flex; flex-direction: column; background-image: radial-gradient(#e5e7eb 1px, transparent 1px); background-size: 20px 20px; height: 50%; width: 100%; }
        @media (min-width: 1024px) { .preview-container { height: 100%; width: 66.666667%; } }
        
        .toolbar { background-color: #fff; border-bottom: 1px solid var(--gray-200); padding: 0.75rem 2rem; display: flex; justify-content: space-between; align-items: center; }
        @media (max-width: 1024px) { .toolbar { padding: 0.75rem 1rem; } }
        .toolbar-title { font-size: 0.875rem; font-weight: 500; color: var(--gray-500); }
        
        .btn-copy { background-color: var(--primary); color: var(--gray-900); font-weight: 700; padding: 0.5rem 1.5rem; border-radius: 0.5rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); display: flex; align-items: center; gap: 0.5rem; transition: all 150ms; cursor: pointer; transform: scale(1); }
        @media (max-width: 640px) { .btn-copy { padding: 0.5rem 1rem; font-size: 0.875rem; } }
        .btn-copy:hover { background-color: var(--primary-hover); transform: scale(1.05); }
        .btn-copy:active { transform: scale(0.95); }
        .btn-copy svg { width: 1.25rem; height: 1.25rem; }

        .canvas { flex: 1 1 0%; display: flex; align-items: flex-start; justify-content: center; padding: 1rem; overflow: auto; }
        @media (min-width: 1024px) { .canvas { align-items: center; padding: 2.5rem; } }
        
        .signature-box { background-color: #fff; padding: 2rem; border-radius: 0.125rem; border: 1px solid var(--gray-200); box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); transform-origin: top left; }
        @media (max-width: 1023px) { .signature-box { transform: scale(0.85); padding: 1.5rem; margin-bottom: 2rem; } }
        @media (min-width: 1024px) { .signature-box { transform: scale(1.1); transform-origin: top center; } }
    </style>
</head>
<body>

    <!-- LOGIN SCREEN -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-card fade-in">
            <img src="https://emaargulf.github.io/emaargulf-branding/assets/logos/logo-full-dark.png" class="login-logo" alt="Emaar Gulf" onerror="this.style.display='none'; document.getElementById('login-fallback').classList.remove('hidden');">
            <h1 id="login-fallback" class="hidden login-h1">EMAAR GULF</h1>
            <h2 class="login-title">Internal Signature Portal</h2>
            <p class="login-subtitle">Please enter the access code to proceed.</p>
            <input type="password" id="login-pass" class="login-input" placeholder="Enter Access Code">
            <button onclick="checkLogin()" class="btn-login">Enter Portal</button>
            <p id="login-error" class="login-error hidden">Incorrect Access Code</p>
        </div>
        <p class="login-footer">Authorized Personnel Only | Emaar Gulf Engineering</p>
        <a href="mailto:archengsafdar@gmail.com" class="login-dev">Dev: archengsafdar@gmail.com</a>
    </div>

    <!-- MAIN APP -->
    <div id="main-app" class="app-container hidden">
        
        <header class="app-header">
            <div class="header-logo-group">
                <img src="https://emaargulf.github.io/emaargulf-branding/assets/logos/logo-icon-light.png" class="header-logo" alt="Logo" onerror="this.style.display='none'">
                <h1 class="header-title">Signature Generator <span class="header-version">v6.1 Enterprise</span></h1>
            </div>
            <div class="header-status">
                <span id="save-status" class="status-saved">‚úì Saved</span>
                <span class="status-divider">|</span>
                <span class="status-text">SECURE SESSION</span>
            </div>
        </header>

        <div class="workspace">
            <!-- SIDEBAR -->
            <div class="sidebar">
                <div class="sidebar-content">
                    
                    <!-- DETAILS -->
                    <div>
                        <h3 class="section-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                            Employee Details
                        </h3>
                        <div class="form-group">
                            <label class="form-label">Full Name (English)</label>
                            <input type="text" id="input-name-en" class="form-input uppercase" placeholder="YOUR NAME" oninput="updateSignature()">
                            <p class="form-help">Auto-converts to UPPERCASE.</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label font-arabic">ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ (Arabic)</label>
                            <input type="text" id="input-name-ar" class="form-input font-arabic" placeholder="ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä" oninput="updateSignature()">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Job Title / Position</label>
                            <input type="text" id="input-job" class="form-input uppercase" placeholder="JOB TITLE | POSITION" oninput="updateSignature()">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Branch / Location</label>
                            <!-- RESTORED CUSTOM DROPDOWN -->
                            <div class="select-wrapper">
                                <select id="input-branch" class="form-select" onchange="updateSignature()">
                                    <option value="Riyadh Branch" selected>Riyadh Branch</option>
                                    <option value="Dammam Branch">Dammam Branch</option>
                                    <option value="Al Ahsa Branch">Al Ahsa Branch</option>
                                    <option value="Al Khobar Branch">Al Khobar Branch</option>
                                </select>
                                <div class="select-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CONTACT -->
                    <div>
                        <h3 class="section-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            Contact Information
                        </h3>
                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <div class="input-group">
                                <!-- RESTORED CUSTOM DROPDOWN -->
                                <div class="select-wrapper w-1-3">
                                    <select id="input-country-code" class="form-select form-select-sm" onchange="updateSignature()">
                                        <option value="+966" selected>üá∏üá¶ +966</option>
                                        <option value="+20">üá™üá¨ +20</option>
                                        <option value="+971">üá¶üá™ +971</option>
                                        <option value="+91">üáÆüá≥ +91</option>
                                    </select>
                                    <div class="select-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                    </div>
                                </div>
                                <input type="text" id="input-phone-number" class="form-input w-2-3" placeholder="123 456 789" oninput="updateSignature()">
                            </div>
                            <p class="form-help">Smart Input: Only numbers allowed.</p>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" id="input-email" class="form-input lowercase" placeholder="yourmail@emaargulf.com" oninput="updateSignature()">
                            <p id="email-warning" class="error-text hidden">‚ö†Ô∏è Please enter a valid email address.</p>
                        </div>
                    </div>

                    <!-- FOOTER SETTINGS -->
                    <div>
                        <h3 class="section-title">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Legal & Footer
                        </h3>
                        <div class="form-group">
                            <label class="form-label">Disclaimer Text</label>
                            <textarea id="input-disclaimer" rows="4" class="form-textarea" style="font-size: 0.75rem; line-height: 1rem;" oninput="updateSignature()">The content of this email is confidential and intended for the recipient specified in the message only. It is strictly forbidden to share any part of this message with any third party without the written consent of the sender.</textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Eco Message</label>
                            <input type="text" id="input-eco" class="form-input" style="font-size: 0.75rem;" value="Please consider the environment before printing this email." oninput="updateSignature()">
                        </div>
                    </div>

                    <!-- ADMIN -->
                    <div>
                        <button onclick="toggleAdmin()" class="admin-toggle">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg> Edit Company Links (Admin Only)
                        </button>
                        <div id="admin-panel" class="admin-panel hidden fade-in">
                            <div class="admin-header">
                                <span class="admin-title">Administrator Controls</span>
                                <button onclick="resetDefaults()" class="btn-reset">Reset Defaults</button>
                            </div>
                            <div class="form-group">
                                <label class="admin-label">Social Media Links</label>
                                <input type="text" id="link-wa" class="admin-input" placeholder="WhatsApp Link" readonly title="Auto-generated">
                                <input type="text" id="link-ig" class="admin-input" placeholder="Instagram Link" oninput="updateAdminLinks()">
                                <input type="text" id="link-fb" class="admin-input" placeholder="Facebook Link" oninput="updateAdminLinks()">
                                <input type="text" id="link-sc" class="admin-input" placeholder="Snapchat Link" oninput="updateAdminLinks()">
                                <input type="text" id="link-li" class="admin-input" placeholder="LinkedIn Link" oninput="updateAdminLinks()">
                                <input type="text" id="link-x" class="admin-input" placeholder="X (Twitter) Link" oninput="updateAdminLinks()">
                            </div>
                            <div class="form-group">
                                <label class="admin-label">Google Map Links</label>
                                <input type="text" id="map-riyadh" class="admin-input" placeholder="Riyadh Map URL" oninput="updateAdminLinks()">
                                <input type="text" id="map-dammam" class="admin-input" placeholder="Dammam Map URL" oninput="updateAdminLinks()">
                                <input type="text" id="map-alahsa" class="admin-input" placeholder="Al Ahsa Map URL" oninput="updateAdminLinks()">
                                <input type="text" id="map-alkhobar" class="admin-input" placeholder="Al Khobar Map URL" oninput="updateAdminLinks()">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-footer">
                    <p>Engineered by <a href="mailto:archengsafdar@gmail.com">archengsafdar@gmail.com</a></p>
                </div>
            </div>

            <!-- PREVIEW AREA -->
            <div class="preview-container">
                <div class="toolbar">
                    <span class="toolbar-title">Live Preview</span>
                    <button onclick="copyFinalSignature()" class="btn-copy" id="copy-btn">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" /></svg>
                        <span>Copy Signature</span>
                    </button>
                </div>
                
                <div class="canvas">
                    <div class="signature-box">
                        <!-- HIDDEN TEMPLATE START -->
                        <div id="signature-container">
                            <table width="600" cellpadding="0" cellspacing="0" border="0" role="presentation" style="width: 600px; max-width: 100%; background-color: #ffffff; border-collapse: collapse; table-layout: fixed;">
                                <tr>
                                    <td style="padding: 0;">
                                        <table width="100%" cellpadding="0" cellspacing="0" border="0" role="presentation" style="width: 100%; border-collapse: collapse;">
                                            <tr>
                                                <td width="220" valign="top" style="width: 220px; border-right: 1px solid #eeeeee; padding-right: 20px; vertical-align: top;">
                                                    <table width="100%" height="250" cellpadding="0" cellspacing="0" border="0" role="presentation" style="height: 250px;">
                                                        <tr>
                                                            <td align="center" valign="top" style="padding-top: 40px; line-height: 0;">
                                                                <a href="https://www.emaargulf.com" target="_blank" style="text-decoration: none;">
                                                                    <img src="https://emaargulf.github.io/emaargulf-branding/assets/logos/logo-full-dark.png" alt="Emaar Gulf" width="160" style="display: block; border: 0; width: 160px; height: auto;">
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td align="center" valign="bottom" style="padding-bottom: 5px;">
                                                                <table cellpadding="0" cellspacing="0" border="0" role="presentation" style="margin: 0 auto 10px auto;">
                                                                    <tr>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-wa" href="https://wa.me/966552771352" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/whatsapp.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-ig" href="https://www.instagram.com/emaar_gulf/" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/instagram.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-fb" href="https://www.emaargulf.com" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/facebook.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-sc" href="https://www.emaargulf.com" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/snapchat.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-li" href="https://www.linkedin.com/company/emaargulf" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/linkedin.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                        <td style="padding: 0 3px; font-size: 0; line-height: 0;"><a id="sig-x" href="https://x.com/emaar_gulf" target="_blank"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/x.png" width="18" height="18" style="display: block; border:0;"></a></td>
                                                                    </tr>
                                                                </table>
                                                                <a href="https://www.emaargulf.com" target="_blank" style="color: #444444; text-decoration: none !important; font-size: 10px; font-weight: 700; letter-spacing: 2px; font-family: 'Inter', Arial, sans-serif; text-transform: lowercase;"><span style="color: #444444; text-decoration: none;">www.emaargulf.com</span></a>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td width="340" valign="top" style="width: 340px; padding-left: 20px; vertical-align: top;">
                                                    <table width="100%" height="250" cellpadding="0" cellspacing="0" border="0" role="presentation" style="width: 100%; height: 250px;">
                                                        <tr>
                                                            <td align="left" valign="top" style="padding-top: 20px; vertical-align: top;">
                                                                <div id="sig-name-ar" style="font-family: 'Cairo', 'Almarai', 'Sakkal Majalla', 'Geeza Pro', 'Segoe UI', Tahoma, sans-serif; font-size: 26px; font-weight: 700; color: #333333; line-height: 1.1; margin-bottom: 4px;">ŸÖÿ≠ŸÖÿØ ÿµŸÅÿØÿ±</div>
                                                                <div id="sig-name-en" style="font-family: 'Inter', Arial, sans-serif; font-size: 18px; font-weight: 700; color: #333333; letter-spacing: 0.5px; text-transform: uppercase; margin-bottom: 5px;">MOHAMMED SAFDAR</div>
                                                                <div id="sig-job" style="font-family: 'Inter', Arial, sans-serif; font-size: 11px; color: #f1aa27; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px;">Senior Architect | Technical Engineer</div>
                                                                <div id="sig-branch" style="font-family: 'Inter', Arial, sans-serif; font-size: 11px; color: #888888; font-weight: 500; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px;">Riyadh Branch</div>
                                                                <div style="margin-bottom: 4px;"><table cellpadding="0" cellspacing="0" border="0" role="presentation"><tr><td valign="middle" style="padding-right: 8px;"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/phone.png" width="13" height="13" alt="" style="display: block;"></td><td valign="middle"><a id="sig-phone-link" href="tel:+966552771352" style="font-family: 'Inter', Arial, sans-serif; font-size: 15px; color: #444444; font-weight: 700; text-decoration: none !important;"><span id="sig-phone-text" style="color: #444444;">+966 552 771 352</span></a></td></tr></table></div>
                                                                <div style="margin-bottom: 15px;"><table cellpadding="0" cellspacing="0" border="0" role="presentation"><tr><td valign="middle" style="padding-right: 8px;"><img src="https://emaargulf.github.io/emaargulf-branding/assets/social/mail.png" width="13" height="13" alt="" style="display: block;"></td><td valign="middle"><a id="sig-email-link" href="mailto:mohammed@emaargulf.com" style="font-family: 'Inter', Arial, sans-serif; font-size: 14px; color: #444444; text-decoration: none !important;"><span id="sig-email-text" style="color: #444444;">mohammed@emaargulf.com</span></a></td></tr></table></div>
                                                            </td>
                                                            <td align="right" valign="top" width="65" style="width: 65px; padding-top: 0; line-height: 0;">
                                                                <img src="https://emaargulf.github.io/emaargulf-branding/assets/logos/logo-part-g.png" width="65" alt="" style="display: block; border: 0; width: 65px;">
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td colspan="2" align="left" valign="bottom" style="padding-bottom: 5px;">
                                                                <div style="font-family: 'Inter', Arial, sans-serif; font-size: 10px; color: #888888; font-weight: 500; line-height: 1.4; letter-spacing: 0.5px;">
                                                                    <a id="sig-map-riyadh" href="https://www.google.com/maps/search/?api=1&query=Emaar+Gulf+Engineering+Consultant+Riyadh" target="_blank" style="text-decoration: none !important; color: #f1aa27; font-weight: 700;"><span style="color: #f1aa27;">RIYADH</span></a>
                                                                    <span style="color: #dddddd; padding: 0 2px;">|</span>
                                                                    <a id="sig-map-dammam" href="https://www.google.com/maps/search/?api=1&query=Emaar+Gulf+Engineering+Consultant+-+Dammam" target="_blank" style="text-decoration: none !important; color: #888888; font-weight: 500;"><span style="color: #888888;">DAMMAM</span></a>
                                                                    <span style="color: #dddddd; padding: 0 2px;">|</span>
                                                                    <a id="sig-map-alahsa" href="https://www.google.com/maps/search/?api=1&query=Emaar+Gulf+Engineering+Consulting+Office+Al-Ahsa+Branch" target="_blank" style="text-decoration: none !important; color: #888888; font-weight: 500;"><span style="color: #888888;">ALAHSA</span></a>
                                                                    <span style="color: #dddddd; padding: 0 2px;">|</span>
                                                                    <a id="sig-map-alkhobar" href="https://www.google.com/maps/search/?api=1&query=Emaar+Gulf+Consultants+Engineering" target="_blank" style="text-decoration: none !important; color: #888888; font-weight: 500;"><span style="color: #888888;">ALKHOBAR</span></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 0 25px 20px 25px; border-top: 1px solid #eeeeee;">
                                        <p id="sig-disclaimer" style="font-family: 'Inter', Helvetica, Arial, sans-serif; font-size: 9px; color: #999999; line-height: 1.4; margin: 10px 0 0 0; text-align: justify;"><strong>Disclaimer:</strong> The content of this email is confidential and intended for the recipient specified in the message only. It is strictly forbidden to share any part of this message with any third party without the written consent of the sender.</p>
                                        <p id="sig-eco" style="font-family: 'Inter', Helvetica, Arial, sans-serif; font-size: 9px; color: #4CAF50; line-height: 1.4; margin: 5px 0 0 0;">Please consider the environment before printing this email.</p>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <!-- HIDDEN TEMPLATE END -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LOGIC -->
    <script>
        function checkLogin() {
            const pass = document.getElementById('login-pass').value;
            if (pass === "EMAAR1352") {
                document.getElementById('login-overlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login-overlay').classList.add('hidden');
                    document.getElementById('main-app').classList.remove('hidden');
                }, 500);
            } else {
                document.getElementById('login-error').classList.remove('hidden');
                document.getElementById('login-pass').classList.add('invalid-input');
            }
        }
        document.getElementById('login-pass').addEventListener('keypress', function (e) { if (e.key === 'Enter') checkLogin(); });

        const DEFAULT_DATA = { nameEn: "YOUR NAME", nameAr: "ÿßŸÑÿßÿ≥ŸÖ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿä", job: "JOB TITLE | POSITION", branch: "Riyadh Branch", countryCode: "+966", phone: "123 456 789", email: "yourmail@emaargulf.com" };

        function loadState() {
            try {
                const saved = localStorage.getItem('emaar_sig_data');
                const data = saved ? JSON.parse(saved) : DEFAULT_DATA;
                const setVal = (id, val) => { if(document.getElementById(id)) document.getElementById(id).value = val; };
                setVal('input-name-en', data.nameEn); setVal('input-name-ar', data.nameAr); setVal('input-job', data.job);
                setVal('input-branch', data.branch); setVal('input-country-code', data.countryCode);
                setVal('input-phone-number', data.phone); setVal('input-email', data.email);
            } catch (e) {}
        }

        function saveState() {
            try {
                const data = {
                    nameEn: document.getElementById('input-name-en').value, nameAr: document.getElementById('input-name-ar').value, job: document.getElementById('input-job').value,
                    branch: document.getElementById('input-branch').value, countryCode: document.getElementById('input-country-code').value,
                    phone: document.getElementById('input-phone-number').value, email: document.getElementById('input-email').value
                };
                localStorage.setItem('emaar_sig_data', JSON.stringify(data));
                const status = document.getElementById('save-status'); status.style.opacity = '1'; setTimeout(() => status.style.opacity = '0', 1000);
            } catch (e) {}
        }

        function resetDefaults() { if(confirm("Reset all fields to default values?")) { try { localStorage.removeItem('emaar_sig_data'); } catch(e){} location.reload(); } }

        window.onload = function() {
            loadState();
            const syncAdmin = (domId, inputId) => { const el = document.getElementById(domId); const input = document.getElementById(inputId); if(el && input) input.value = el.href; };
            syncAdmin('sig-ig', 'link-ig'); syncAdmin('sig-fb', 'link-fb'); syncAdmin('sig-sc', 'link-sc');
            syncAdmin('sig-li', 'link-li'); syncAdmin('sig-x', 'link-x');
            syncAdmin('sig-map-riyadh', 'map-riyadh'); syncAdmin('sig-map-dammam', 'map-dammam');
            syncAdmin('sig-map-alahsa', 'map-alahsa'); syncAdmin('sig-map-alkhobar', 'map-alkhobar');
            updateSignature();
        }

        function updateSignature() {
            const nameVal = document.getElementById('input-name-en').value.toUpperCase(); document.getElementById('sig-name-en').textContent = nameVal;
            const jobVal = document.getElementById('input-job').value.toUpperCase(); document.getElementById('sig-job').textContent = jobVal;
            document.getElementById('sig-name-ar').textContent = document.getElementById('input-name-ar').value;
            
            const branchSelect = document.getElementById('input-branch'); const selectedBranch = branchSelect.value; document.getElementById('sig-branch').textContent = selectedBranch;
            const disclaimerText = document.getElementById('input-disclaimer').value; document.getElementById('sig-disclaimer').innerHTML = `<strong>Disclaimer:</strong> ${disclaimerText.replace(/^Disclaimer:\s*/i, '')}`;
            document.getElementById('sig-eco').textContent = document.getElementById('input-eco').value;

            const mapIds = { 'Riyadh Branch': 'sig-map-riyadh', 'Dammam Branch': 'sig-map-dammam', 'Al Ahsa Branch': 'sig-map-alahsa', 'Al Khobar Branch': 'sig-map-alkhobar' };
            Object.values(mapIds).forEach(id => { const el = document.getElementById(id); if (el) { el.style.color = '#888888'; el.style.fontWeight = '500'; const span = el.querySelector('span'); if (span) span.style.color = '#888888'; } });
            const activeId = mapIds[selectedBranch]; if (activeId) { const activeEl = document.getElementById(activeId); if (activeEl) { activeEl.style.color = '#f1aa27'; activeEl.style.fontWeight = '700'; const span = activeEl.querySelector('span'); if (span) span.style.color = '#f1aa27'; } }
            
            const countryCode = document.getElementById('input-country-code').value;
            const phoneInput = document.getElementById('input-phone-number');
            let rawNumber = phoneInput.value.replace(/\D/g, ''); if (phoneInput.value !== rawNumber) phoneInput.value = rawNumber;
            let formattedNumber = rawNumber.length > 0 ? rawNumber.match(/.{1,3}/g).join(' ') : "";
            document.getElementById('sig-phone-text').textContent = `${countryCode} ${formattedNumber}`;
            document.getElementById('sig-phone-link').href = 'tel:' + countryCode + rawNumber;

            const waUrl = "https://wa.me/" + countryCode.replace(/\+/g, '') + rawNumber;
            document.getElementById('sig-wa').href = waUrl;
            if (document.getElementById('link-wa')) document.getElementById('link-wa').value = waUrl;
            
            const emailInput = document.getElementById('input-email'); const emailVal = emailInput.value.toLowerCase();
            document.getElementById('sig-email-text').textContent = emailVal; document.getElementById('sig-email-link').href = 'mailto:' + emailVal;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailVal.length > 0 && !emailRegex.test(emailVal)) { emailInput.classList.add('invalid-input'); document.getElementById('email-warning').classList.remove('hidden'); } else { emailInput.classList.remove('invalid-input'); document.getElementById('email-warning').classList.add('hidden'); }

            saveState();
        }

        function updateAdminLinks() {
            document.getElementById('sig-ig').href = document.getElementById('link-ig').value;
            document.getElementById('sig-fb').href = document.getElementById('link-fb').value;
            document.getElementById('sig-sc').href = document.getElementById('link-sc').value;
            document.getElementById('sig-li').href = document.getElementById('link-li').value;
            document.getElementById('sig-x').href = document.getElementById('link-x').value;
            document.getElementById('sig-map-riyadh').href = document.getElementById('map-riyadh').value;
            document.getElementById('sig-map-dammam').href = document.getElementById('map-dammam').value;
            document.getElementById('sig-map-alahsa').href = document.getElementById('map-alahsa').value;
            document.getElementById('sig-map-alkhobar').href = document.getElementById('map-alkhobar').value;
        }

        function toggleAdmin() {
            const panel = document.getElementById('admin-panel');
            if (panel.classList.contains('hidden')) {
                const pass = prompt("Enter Senior Engineer Admin Password:");
                if (pass === "archengsafdar") panel.classList.remove('hidden'); else if (pass) alert("‚õî Access Denied: Incorrect Admin Credentials.");
            } else { panel.classList.add('hidden'); }
        }

        function copyFinalSignature() {
            const signatureNode = document.getElementById('signature-container');
            const range = document.createRange(); range.selectNode(signatureNode);
            window.getSelection().removeAllRanges(); window.getSelection().addRange(range);
            try { 
                document.execCommand('copy'); 
                const btn = document.getElementById('copy-btn');
                const btnSpan = btn.querySelector('span');
                const origText = btnSpan.innerText;
                const origBg = btn.style.backgroundColor;
                btnSpan.innerText = "Copied!";
                btn.style.backgroundColor = "var(--green-500)";
                btn.style.color = "white";
                setTimeout(() => { btnSpan.innerText = origText; btn.style.backgroundColor = origBg; btn.style.color = "#111"; }, 2000);
            } catch (err) { alert('Manual Copy Required.'); }
            window.getSelection().removeAllRanges();
        }
    </script>
</body>
</html>
